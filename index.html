<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <title>conf3rence-collective-nft</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script type="module" src="https://unpkg.com/@google/model-viewer@3.4.0/dist/model-viewer.min.js"></script>
  <style>
    html,body{height:100%;margin:0;background:#000}
    model-viewer{width:100%;height:100%}
    .sat{width:84px;height:84px;border-radius:50%;border:2px solid #fff;box-shadow:0 0 10px rgba(255,255,255,.4);
         object-fit:cover;cursor:pointer;transition:transform .2s ease}
    .sat:hover{transform:scale(1.12)}
  </style>
</head>
<body>
  <model-viewer id="viewer"
    src="ball4.glb"
    alt="Community Ball"
    camera-controls
    auto-rotate
    interaction-prompt="none"
    exposure="1"
    background-color="#000">
  </model-viewer>

  <script>
    // --- Deine Bilder (erstmal mit 5 testen; später bis 100 erweitern) ---
    const images = [
      "https://picsum.photos/id/1015/256/256",
      "https://picsum.photos/id/1016/256/256",
      "https://picsum.photos/id/1025/256/256",
      "https://picsum.photos/id/1035/256/256",
      "https://picsum.photos/id/1045/256/256"
      // hier später "images/1.jpg", ... "images/100.jpg"
    ];

    // --- Entsprechende NFT-Links (gleiche Reihenfolge/Länge!) ---
    // Beispiel für OpenSea auf Polygon: https://opensea.io/assets/matic/<CONTRACT>/<TOKEN_ID>
    const CLICK_URLS = [
      "https://opensea.io/assets/matic/0xDEINCONTRACT/1",
      "https://opensea.io/assets/matic/0xDEINCONTRACT/2",
      "https://opensea.io/assets/matic/0xDEINCONTRACT/3",
      "https://opensea.io/assets/matic/0xDEINCONTRACT/4",
      "https://opensea.io/assets/matic/0xDEINCONTRACT/5"
    ];

    const RADIUS = 2.2; // Abstand der Satelliten (bei Bedarf 1.6–3.0 testen)

    function fibonacciSphere(n, r){
      const pts=[], PHI=(1+Math.sqrt(5))/2;
      for(let i=0;i<n;i++){
        const t=i/n, inc=Math.PI*2*(1-1/PHI), z=1-2*t, rad=Math.sqrt(1-z*z), th=inc*i;
        pts.push([Math.cos(th)*rad*r, Math.sin(th)*rad*r, z*r]);
      }
      return pts;
    }

    const viewer=document.getElementById('viewer');
    viewer.addEventListener('load', ()=>{
      if(images.length!==CLICK_URLS.length) console.warn("images & CLICK_URLS müssen gleich lang sein!");
      const pts=fibonacciSphere(images.length,RADIUS);
      images.forEach((url,i)=>{
        const el=document.createElement('img');
        el.src=url; el.className='sat'; el.slot=`hotspot-${i}`;
        const [x,y,z]=pts[i];
        el.dataset.position=`${x} ${y} ${z}`;
        el.dataset.normal=`${x} ${y} ${z}`;
        el.setAttribute('data-visibility-attribute','visible');
        el.title=`NFT #${i+1}`;
        el.addEventListener('click', ()=>{ const link=CLICK_URLS[i]; if(link) window.open(link,'_blank','noopener'); });
        viewer.appendChild(el);
      });
    });
  </script>
</body>
</html>
